package avrms.socket.app;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.ThreadFactory;

import avrms.socket.WebsocketClientEndpoint;
public class SocketApp {
	public static void main(String[] args) throws IOException, InterruptedException, URISyntaxException {

	
		Process proc = Runtime.getRuntime().exec("ping -c 3 www.google.com");
		final WebsocketClientEndpoint clientEndPoint = new WebsocketClientEndpoint(new URI("ws://localhost:8080/avrms/realtime/echo.do"));
		// add listener
		clientEndPoint.addMessageHandler(new WebsocketClientEndpoint.MessageHandler() {
			public void handleMessage(String message) {
				System.out.println(message);
			}
		});
		while(true){
			clientEndPoint.sendMessage("LOG:");
		}
//		BufferedReader reader =  new BufferedReader(new InputStreamReader(proc.getInputStream()));
//		String line = "";
//		try {
//			while((line = reader.readLine()) != null){
////				System.out.println(line);
//				
//				clientEndPoint.sendMessage("LOG:"+line);
//				System.out.println("sent to server");
////				System.out.println("LOG:"+line);
//			}
//		} catch (IOException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
//		proc.waitFor();
//		
	}
	public static void readOutPut(Process proc) throws IOException, InterruptedException, URISyntaxException{
		// Read the output
		// open websocket
		
		
		
		Thread.sleep(10000);
	}

}
